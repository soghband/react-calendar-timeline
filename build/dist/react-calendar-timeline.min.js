!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("moment"),require("interact")):"function"==typeof define&&define.amd?define(["React","moment","interact"],t):"object"==typeof exports?exports.ReactCalendarTimeline=t(require("React"),require("moment"),require("interact")):e.ReactCalendarTimeline=t(e.React,e.moment,e.interact)}(this,function(e,t,i){return function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="build/dist/",t(0)}([function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=r(n);t["default"]=o["default"]},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(p){n=!0,o=p}finally{try{!r&&a["return"]&&a["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),l=i(2),d=r(l),c=i(3),h=r(c);i(4);var f=i(8),m=r(f),g=i(12),v=r(g),y=i(13),T=r(y),b=i(14),S=r(b),P=i(15),w=r(P),x=i(16),k=r(x),E=i(17),C=r(E),M=i(11),O={groupIdKey:"id",groupTitleKey:"title",itemIdKey:"id",itemTitleKey:"title",itemDivTitleKey:"title",itemGroupKey:"group",itemTimeStatus:"status",itemTimeStartKey:"start_time",itemTimeEndKey:"end_time"},z={second:1,minute:1,hour:1,day:1,month:1,year:1},_=function(e){function t(e){o(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));R.call(i);var r=null,a=null;i.props.defaultTimeStart&&i.props.defaultTimeEnd?(r=i.props.defaultTimeStart.valueOf(),a=i.props.defaultTimeEnd.valueOf()):i.props.visibleTimeStart&&i.props.visibleTimeEnd?(r=i.props.visibleTimeStart,a=i.props.visibleTimeEnd):(r=Math.min.apply(Math,n(i.props.items.map(function(e){return(0,M._get)(e,"start").getTime()}))),a=Math.max.apply(Math,n(i.props.items.map(function(e){return(0,M._get)(e,"end").getTime()}))),r&&a||(r=(new Date).getTime()-6048e5,a=(new Date).getTime()+6048e5),i.props.onTimeInit&&i.props.onTimeInit(r,a)),i.state={width:1e3,visibleTimeStart:r,visibleTimeEnd:a,canvasTimeStart:r-(a-r),selectedItem:null,dragTime:null,dragGroupTitle:null,resizeEnd:null,isDragging:!1,topOffset:0,resizingItem:null};var p=i.stackItems(e.items,e.groups,i.state.canvasTimeStart,i.state.visibleTimeStart,i.state.visibleTimeEnd,i.state.width),u=p.dimensionItems,l=p.height,d=p.groupHeights,c=p.groupTops;return i.state.dimensionItems=u,i.state.height=l,i.state.groupHeights=d,i.state.groupTops=c,i}return a(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;this.resize(),this.resizeEventListener={handleEvent:function(t){e.resize()}},window.addEventListener("resize",this.resizeEventListener),window.addEventListener("mouseup",this.handleMouseUp),this.lastTouchDistance=null,this.refs.scrollComponent.addEventListener("touchstart",this.touchStart),this.refs.scrollComponent.addEventListener("touchmove",this.touchMove),this.refs.scrollComponent.addEventListener("touchend",this.touchEnd)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeEventListener),window.removeEventListener("mouseup",this.handleMouseUp),this.refs.scrollComponent.removeEventListener("touchstart",this.touchStart),this.refs.scrollComponent.removeEventListener("touchmove",this.touchMove),this.refs.scrollComponent.removeEventListener("touchend",this.touchEnd)}},{key:"resize",value:function(){var e=Math.round(this.refs.container.getBoundingClientRect().width-this.props.sidebarWidth),t=this.stackItems(this.props.items,this.props.groups,this.state.canvasTimeStart,this.state.visibleTimeStart,this.state.visibleTimeEnd,e),i=t.dimensionItems,r=t.height,n=t.groupHeights,o=t.groupTops;this.setState({width:e,topOffset:this.refs.container.getBoundingClientRect().top+window.pageYOffset,dimensionItems:i,height:r,groupHeights:n,groupTops:o}),this.refs.scrollComponent.scrollLeft=e}},{key:"componentWillReceiveProps",value:function(e){var t=e.visibleTimeStart,i=e.visibleTimeEnd,r=e.items,n=e.groups;t&&i&&this.updateScrollCanvas(t,i,r!==this.props.items||n!==this.props.groups,r,n),r===this.props.items&&n===this.props.groups||this.updateDimensions(r,n)}},{key:"updateDimensions",value:function(e,t){var i=this.state,r=i.canvasTimeStart,n=i.visibleTimeStart,o=i.visibleTimeEnd,s=i.width,a=this.stackItems(e,t,r,n,o,s),p=a.dimensionItems,u=a.height,l=a.groupHeights,d=a.groupTops;this.setState({dimensionItems:p,height:u,groupHeights:l,groupTops:d})}},{key:"updateScrollCanvas",value:function(e,t,i,r,n){var o=this.state.canvasTimeStart,s=this.state.visibleTimeEnd-this.state.visibleTimeStart,a=t-e,p=r||this.props.items,u=n||this.props.groups,l={visibleTimeStart:e,visibleTimeEnd:t},d=!1,c=e>=o+.5*s&&e<=o+1.5*s&&t>=o+1.5*s&&t<=o+2.5*s;if(c){var h=Math.round(this.state.width*(e-o)/a);Math.round(this.refs.scrollComponent.scrollLeft)!==h&&(d=!0)}else d=!0;if(d&&(l.canvasTimeStart=e-a,this.refs.scrollComponent.scrollLeft=this.state.width,this.props.onBoundsChange&&this.props.onBoundsChange(l.canvasTimeStart,l.canvasTimeStart+3*a)),d||i){var f=l.canvasTimeStart?l.canvasTimeStart:o,m=this.stackItems(p,u,f,e,t,this.state.width),g=m.dimensionItems,v=m.height,y=m.groupHeights,T=m.groupTops;l.dimensionItems=g,l.height=v,l.groupHeights=y,l.groupTops=T}this.setState(l)}},{key:"zoomIn",value:function(e){e.preventDefault(),this.changeZoom(.75)}},{key:"zoomOut",value:function(e){e.preventDefault(),this.changeZoom(1.25)}},{key:"changeZoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=this.props,r=i.minZoom,n=i.maxZoom,o=this.state.visibleTimeEnd-this.state.visibleTimeStart,s=Math.min(Math.max(Math.round(o*e),r),n),a=Math.round(this.state.visibleTimeStart+(o-s)*t);this.props.onTimeChange.bind(this)(a,a+s)}},{key:"rowAndTimeFromEvent",value:function(e){var t=this.props,i=t.lineHeight,r=t.dragSnap,n=t.headerLabelGroupHeight,o=t.headerLabelHeight,s=this.state,a=s.width,p=s.visibleTimeStart,u=s.visibleTimeEnd,l=(0,M.getParentPosition)(e.currentTarget),d=e.clientX-l.x,c=e.clientY-l.y,h=n+o,f=Math.floor((c-h)/i),m=Math.round(p+d/a*(u-p));return m=Math.floor(m/r)*r,[f,m]}},{key:"todayLine",value:function(e,t,i,r,n,o,s){return d["default"].createElement(C["default"],{canvasTimeStart:e,canvasTimeEnd:i,canvasWidth:r,lineHeight:this.props.lineHeight,lineCount:(0,M._length)(this.props.groups),height:o,headerHeight:s})}},{key:"verticalLines",value:function(e,t,i,r,n,o,s,a){return d["default"].createElement(w["default"],{canvasTimeStart:e,canvasTimeEnd:i,canvasWidth:r,lineHeight:this.props.lineHeight,lineCount:(0,M._length)(this.props.groups),minUnit:n,timeSteps:o,fixedHeader:this.props.fixedHeader,height:s,headerHeight:a})}},{key:"horizontalLines",value:function(e,t,i,r,n,o){return d["default"].createElement(k["default"],{canvasWidth:r,lineHeight:this.props.lineHeight,lineCount:(0,M._length)(this.props.groups),groups:this.props.groups,groupHeights:n,headerHeight:o})}},{key:"items",value:function(e,t,i,r,n,o,s,a){return d["default"].createElement(m["default"],{canvasTimeStart:e,canvasTimeEnd:i,canvasWidth:r,lineHeight:this.props.lineHeight,lineCount:(0,M._length)(this.props.groups),dimensionItems:o,minUnit:n,groupHeights:s,groupTops:a,items:this.props.items,groups:this.props.groups,keys:this.props.keys,selectedItem:this.state.selectedItem,dragSnap:this.props.dragSnap,minResizeWidth:this.props.minResizeWidth,canChangeGroup:this.props.canChangeGroup,canMove:this.props.canMove,canResize:this.props.canResize,useResizeHandle:this.props.useResizeHandle,moveResizeValidator:this.props.moveResizeValidator,topOffset:this.state.topOffset,itemSelect:this.selectItem,itemDrag:this.dragItem,itemDrop:this.dropItem,onItemDoubleClick:this.props.onItemDoubleClick,onItemContextMenu:this.props.onItemContextMenu,itemResizing:this.resizingItem,itemResized:this.resizedItem})}},{key:"infoLabel",value:function(){var e=null;return this.state.dragTime?e=(0,h["default"])(this.state.dragTime).format("LLL")+", "+this.state.dragGroupTitle:this.state.resizeEnd&&(e=(0,h["default"])(this.state.resizeEnd).format("LLL")),e?d["default"].createElement(v["default"],{label:e}):""}},{key:"header",value:function(e,t,i,r,n,o,s,a){return d["default"].createElement(S["default"],{canvasTimeStart:e,canvasTimeEnd:i,canvasWidth:r,lineHeight:this.props.lineHeight,minUnit:n,timeSteps:o,headerLabelGroupHeight:s,headerLabelHeight:a,width:this.state.width,zoom:t,visibleTimeStart:this.state.visibleTimeStart,visibleTimeEnd:this.state.visibleTimeEnd,fixedHeader:this.props.fixedHeader,fixedHeaderOffset:this.props.fixedHeaderOffset,itemParentId:this.props.itemParentId,zIndex:this.props.zIndexStart+1,showPeriod:this.showPeriod})}},{key:"sidebar",value:function(e,t,i){return d["default"].createElement(T["default"],{groups:this.props.groups,keys:this.props.keys,width:this.props.sidebarWidth,lineHeight:this.props.lineHeight,groupHeights:t,height:e,headerHeight:i,fixedHeader:this.props.fixedHeader,zIndex:this.props.zIndexStart+2},this.props.children)}},{key:"stackItems",value:function i(e,t,r,n,o,s){var a=this.props,p=a.keys,u=a.dragSnap,l=a.lineHeight,d=a.headerLabelGroupHeight,c=a.headerLabelHeight,i=a.stackItems,h=a.itemHeightRatio,f=this.state,m=f.draggingItem,g=f.dragTime,v=f.resizingItem,y=f.resizeEnd,T=f.newGroupOrder,b=o-n,S=r+3*b,P=3*s,w=d+c,x=(0,M.getVisibleItems)(e,r,S,p),k=(0,M.getGroupOrders)(t,p),E=x.map(function(e){return{id:(0,M._get)(e,p.itemIdKey),dimensions:(0,M.calculateDimensions)(e,k[(0,M._get)(e,p.itemGroupKey)],p,r,S,P,u,l,m,g,v,y,T,h)}}),C=i?M.stack:M.nostack,O=C(E,k,l,w),z=O.height,_=O.groupHeights,R=O.groupTops;return{dimensionItems:E,height:z,groupHeights:_,groupTops:R}}},{key:"render",value:function(){var e=this.props,t=e.items,i=e.groups,r=e.headerLabelGroupHeight,n=e.headerLabelHeight,o=e.sidebarWidth,s=e.timeSteps,a=this.state,p=a.draggingItem,u=a.resizingItem,l=a.isDragging,c=a.width,h=a.visibleTimeStart,f=a.visibleTimeEnd,m=a.canvasTimeStart,g=this.state,v=g.dimensionItems,y=g.height,T=g.groupHeights,b=g.groupTops,S=f-h,P=m+3*S,w=3*c,x=(0,M.getMinUnit)(S,c,s),k=r+n;if(p||u){var E=this.stackItems(t,i,m,h,f,c);v=E.dimensionItems,y=E.height,T=E.groupHeights,b=E.groupTops}var C={height:y+"px"},O={width:c+"px",height:y+20+"px",cursor:l?"move":"default"},z={width:w+"px",height:y+"px"};return d["default"].createElement("div",{style:this.props.style,ref:"container",className:"react-calendar-timeline"},d["default"].createElement("div",{style:C,className:"rct-outer"},o>0?this.sidebar(y,T,k):null,d["default"].createElement("div",{ref:"scrollComponent",className:"rct-scroll",style:O,onClick:this.scrollAreaClick,onScroll:this.onScroll,onWheel:this.onWheel,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove},d["default"].createElement("div",{ref:"canvasComponent",className:"rct-canvas",style:z,onDoubleClick:this.handleDoubleClick},this.items(m,S,P,w,x,v,T,b),this.verticalLines(m,S,P,w,x,s,y,k),this.horizontalLines(m,S,P,w,T,k),this.todayLine(m,S,P,w,x,y,k),this.infoLabel(),this.header(m,S,P,w,x,s,r,n)))))}}]),t}(l.Component),R=function(){var e=this;this.touchStart=function(t){if(2===t.touches.length)t.preventDefault(),e.lastTouchDistance=Math.abs(t.touches[0].screenX-t.touches[1].screenX),e.singleTouchStart=null,e.lastSingleTouch=null;else if(1===t.touches.length&&"fixed"===e.props.fixedHeader){var i=t.touches[0].clientX,r=t.touches[0].clientY;e.lastTouchDistance=null,e.singleTouchStart={x:i,y:r,screenY:window.pageYOffset},e.lastSingleTouch={x:i,y:r,screenY:window.pageYOffset}}},this.touchMove=function(t){if(e.state.dragTime||e.state.resizeEnd)return void t.preventDefault();if(e.lastTouchDistance&&2===t.touches.length){t.preventDefault();var i=Math.abs(t.touches[0].screenX-t.touches[1].screenX),r=(0,M.getParentPosition)(t.currentTarget),n=(t.touches[0].screenX+t.touches[1].screenX)/2-r.x;0!==i&&0!==e.lastTouchDistance&&(e.changeZoom(e.lastTouchDistance/i,n/e.state.width),e.lastTouchDistance=i)}else if(e.lastSingleTouch&&1===t.touches.length&&"fixed"===e.props.fixedHeader){var o=t.touches[0].clientX,s=t.touches[0].clientY,a=o-e.lastSingleTouch.x,p=o-e.singleTouchStart.x,u=s-e.singleTouchStart.y;e.lastSingleTouch={x:o,y:s};var l=3*Math.abs(p)>Math.abs(u),d=3*Math.abs(u)>Math.abs(p);0!==a&&l&&(e.refs.scrollComponent.scrollLeft-=a),d&&window.scrollTo(window.pageXOffset,e.singleTouchStart.screenY-u)}},this.touchEnd=function(t){e.lastTouchDistance&&(t.preventDefault(),e.lastTouchDistance=null),e.lastSingleTouch&&(t.preventDefault(),e.lastSingleTouch=null,e.singleTouchStart=null)},this.onScroll=function(){var t=e.refs.scrollComponent,i=e.state.canvasTimeStart,r=t.scrollLeft,n=e.state.visibleTimeEnd-e.state.visibleTimeStart,o=e.state.width,s=i+n*r/o;r<.5*e.state.width&&(e.setState({canvasTimeStart:e.state.canvasTimeStart-n}),t.scrollLeft+=e.state.width),r>1.5*e.state.width&&(e.setState({canvasTimeStart:e.state.canvasTimeStart+n}),t.scrollLeft-=e.state.width),e.state.visibleTimeStart===s&&e.state.visibleTimeEnd===s+n||e.props.onTimeChange.bind(e)(s,s+n)},this.onWheel=function(t){var i=e.props.traditionalZoom;if(t.ctrlKey){t.preventDefault();var r=(0,M.getParentPosition)(t.currentTarget),n=t.clientX-r.x;e.changeZoom(1+t.deltaY/50,n/e.state.width)}else if(t.shiftKey){t.preventDefault();var o=e.refs.scrollComponent;o.scrollLeft+=t.deltaY}else if(t.altKey){var s=(0,M.getParentPosition)(t.currentTarget),a=t.clientX-s.x;e.changeZoom(1+t.deltaY/500,a/e.state.width)}else if("fixed"===e.props.fixedHeader&&(0!==t.deltaX&&(i||(e.refs.scrollComponent.scrollLeft+=t.deltaX)),0!==t.deltaY&&(window.scrollTo(window.pageXOffset,window.pageYOffset+t.deltaY),i))){var p=(0,M.getParentPosition)(t.currentTarget),u=t.clientX-p.x;e.changeZoom(1+t.deltaY/50,u/e.state.width)}},this.showPeriod=function(t,i){var r=t.valueOf(),n=(0,h["default"])(t).add(1,i).valueOf(),o=n-r;if(!(o<36e4)){if("year"!==i&&e.state.visibleTimeStart===r&&e.state.visibleTimeEnd===n){var s=(0,M.getNextUnit)(i);r=t.startOf(s).valueOf(),n=(0,h["default"])(r).add(1,s),o=n-r}e.props.onTimeChange.bind(e)(r,r+o)}},this.selectItem=function(t,i,r){e.state.selectedItem===t||e.props.itemTouchSendsClick&&"touch"===i?t&&e.props.onItemClick&&e.props.onItemClick(t,r):(e.setState({selectedItem:t}),t&&e.props.onItemSelect&&e.props.onItemSelect(t,r))},this.scrollAreaClick=function(t){var i=e.refs.scrollComponent.scrollLeft,r=e.state.dragStartScrollPosition,n=10,o=Math.abs(i-r[0]);if(!(0,M.hasSomeParentTheClass)(t.target,"rct-item"))if(e.state.selectedItem)e.selectItem(null);else if(e.props.onCanvasClick&&n>=o){var s=e.rowAndTimeFromEvent(t),a=p(s,2),u=a[0],l=a[1];if(u>=0&&u<e.props.groups.length){var d=(0,M._get)(e.props.groups[u],e.props.keys.groupIdKey);e.props.onCanvasClick(d,l,t)}}},this.dragItem=function(t,i,r){var n=e.props.groups[r],o=e.props.keys;e.setState({draggingItem:t,dragTime:i,newGroupOrder:r,dragGroupTitle:n?(0,M._get)(n,o.groupTitleKey):""})},this.dropItem=function(t,i,r){e.setState({draggingItem:null,dragTime:null,dragGroupTitle:null});var n=e.props.keys,o=e.props.items.filter(function(e){return e.id===t}),s=o[n.itemTimeEndKey]-o[n.itemTimeStartKey];o[n.itemTimeStartKey]=i,o[n.itemTimeEndKey]=o[n.itemTimeStartKey]+s,o[n.itemGroupKey]=r,e.props.onItemMove&&e.props.onItemMove(t,o)},this.resizingItem=function(t,i){e.setState({resizingItem:t,resizeEnd:i})},this.resizedItem=function(t,i){e.setState({resizingItem:null,resizeEnd:null}),e.props.items[t][e.props.keys.itemTimeEndKey]=i,e.props.onItemResize&&e.props.onItemResize(t,i)},this.handleMouseDown=function(t){var i=e.state.topOffset,r=t.pageY,n=e.props,o=n.headerLabelGroupHeight,s=n.headerLabelHeight,a=o+s;r-i>a&&e.setState({isDragging:!0,dragStartPosition:t.pageX,dragStartScrollPosition:[e.refs.scrollComponent.scrollLeft,e.refs.scrollComponent.scrollTop]})},this.handleMouseMove=function(t){!e.state.isDragging||e.state.draggingItem||e.state.resizingItem||(e.refs.scrollComponent.scrollLeft+=Math.round(e.state.dragStartPosition-t.pageX),e.setState({dragStartPosition:t.pageX}))},this.handleMouseUp=function(t){e.state.isDragging&&e.setState({isDragging:!1,dragStartPosition:null}),e.resize()},this.handleDoubleClick=function(t){var i=e.state,r=i.canvasTimeStart,n=i.width,o=i.visibleTimeStart,s=i.visibleTimeEnd,a=i.groupTops,p=i.topOffset,u=s-o,l=r+3*u,d=3*n,c=t.pageX,h=t.pageY,f=(l-r)/d,m=e.refs.scrollComponent.getBoundingClientRect(),g=o+f*(c-m.left);e.props.dragSnap&&(g=Math.round(g/e.props.dragSnap)*e.props.dragSnap);var v=0,y=!0,T=!1,b=void 0;try{for(var S,P=Object.keys(a)[Symbol.iterator]();!(y=(S=P.next()).done);y=!0){var w=S.value,x=a[w];if(!(h-p>x))break;v=parseInt(w,10)}}catch(k){T=!0,b=k}finally{try{!y&&P["return"]&&P["return"]()}finally{if(T)throw b}}e.props.onCanvasDoubleClick&&e.props.onCanvasDoubleClick(g,e.props.groups[v])}};t["default"]=_,_.propTypes={itemParentId:d["default"].PropTypes.number,groups:d["default"].PropTypes.oneOfType([d["default"].PropTypes.array,d["default"].PropTypes.object]).isRequired,items:d["default"].PropTypes.oneOfType([d["default"].PropTypes.array,d["default"].PropTypes.object]).isRequired,sidebarWidth:d["default"].PropTypes.number,dragSnap:d["default"].PropTypes.number,minResizeWidth:d["default"].PropTypes.number,fixedHeader:d["default"].PropTypes.oneOf(["fixed","absolute","none"]),fixedHeaderOffset:d["default"].PropTypes.number,zIndexStart:d["default"].PropTypes.number,lineHeight:d["default"].PropTypes.number,headerLabelGroupHeight:d["default"].PropTypes.number,headerLabelHeight:d["default"].PropTypes.number,itemHeightRatio:d["default"].PropTypes.number,minZoom:d["default"].PropTypes.number,maxZoom:d["default"].PropTypes.number,canChangeGroup:d["default"].PropTypes.bool,canMove:d["default"].PropTypes.bool,canResize:d["default"].PropTypes.bool,useResizeHandle:d["default"].PropTypes.bool,stackItems:d["default"].PropTypes.bool,traditionalZoom:d["default"].PropTypes.bool,itemTouchSendsClick:d["default"].PropTypes.bool,onItemMove:d["default"].PropTypes.func,onItemResize:d["default"].PropTypes.func,onItemClick:d["default"].PropTypes.func,onItemSelect:d["default"].PropTypes.func,onCanvasClick:d["default"].PropTypes.func,onItemDoubleClick:d["default"].PropTypes.func,onItemContextMenu:d["default"].PropTypes.func,onCanvasDoubleClick:d["default"].PropTypes.func,moveResizeValidator:d["default"].PropTypes.func,dayBackground:d["default"].PropTypes.func,style:d["default"].PropTypes.object,keys:d["default"].PropTypes.object,timeSteps:d["default"].PropTypes.object,defaultTimeStart:d["default"].PropTypes.object,defaultTimeEnd:d["default"].PropTypes.object,visibleTimeStart:d["default"].PropTypes.number,visibleTimeEnd:d["default"].PropTypes.number,onTimeChange:d["default"].PropTypes.func,onTimeInit:d["default"].PropTypes.func,onBoundsChange:d["default"].PropTypes.func,children:d["default"].PropTypes.node},_.defaultProps={itemParentId:0,sidebarWidth:150,dragSnap:9e5,minResizeWidth:20,fixedHeader:"none",fixedHeaderOffset:0,zIndexStart:10,lineHeight:30,headerLabelGroupHeight:30,headerLabelHeight:30,itemHeightRatio:.65,minZoom:36e5,maxZoom:15778368e4,canChangeGroup:!0,canMove:!0,canResize:!0,useResizeHandle:!1,stackItems:!1,traditionalZoom:!1,onItemMove:null,onItemResize:null,onItemClick:null,onItemSelect:null,onCanvasClick:null,onItemDoubleClick:null,onItemContextMenu:null,moveResizeValidator:null,dayBackground:null,defaultTimeStart:null,defaultTimeEnd:null,itemTouchSendsClick:!1,style:{},keys:O,timeSteps:z,visibleTimeStart:null,visibleTimeEnd:null,onTimeChange:function(e,t){this.updateScrollCanvas(e,t)},onTimeInit:null,onBoundsChange:null,children:null}},function(t,i){t.exports=e},function(e,i){e.exports=t},function(e,t){},,,,function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),p=i(2),u=r(p),l=i(9),d=r(l),c=i(11),h=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return!((0,c.arraysEqual)(e.groups,this.props.groups)&&(0,c.arraysEqual)(e.items,this.props.items)&&e.keys===this.props.keys&&e.canvasTimeStart===this.props.canvasTimeStart&&e.canvasTimeEnd===this.props.canvasTimeEnd&&e.canvasWidth===this.props.canvasWidth&&e.selectedItem===this.props.selectedItem&&e.lineHeight===this.props.lineHeight&&e.dragSnap===this.props.dragSnap&&e.minResizeWidth===this.props.minResizeWidth&&e.canChangeGroup===this.props.canChangeGroup&&e.canMove===this.props.canMove&&e.canResize===this.props.canResize&&e.dimensionItems===this.props.dimensionItems&&e.topOffset===this.props.topOffset)}},{key:"getGroupOrders",value:function(){for(var e=this.props.keys.groupIdKey,t={},i=0;i<this.props.groups.length;i++)t[(0,c._get)(this.props.groups[i],e)]=i;return t}},{key:"getVisibleItems",value:function(e,t,i){var r=this.props.keys,n=r.itemTimeStartKey,o=r.itemTimeEndKey;return this.props.items.filter(function(i){return(0,c._get)(i,n)<=t&&(0,c._get)(i,o)>=e})}},{key:"render",value:function(){var e=this,t=this.props,i=t.canvasTimeStart,r=t.canvasTimeEnd,n=t.dimensionItems,o=this.props.keys,s=o.itemIdKey,a=o.itemGroupKey,p=this.getGroupOrders(),l=this.getVisibleItems(i,r,p),h=(0,c.keyBy)(n,"id");return u["default"].createElement("div",{className:"rct-items"},l.map(function(t){return u["default"].createElement(d["default"],{key:(0,c._get)(t,s),item:t,keys:e.props.keys,order:p[(0,c._get)(t,a)],dimensions:h[(0,c._get)(t,s)].dimensions,selected:e.props.selectedItem===(0,c._get)(t,s),canChangeGroup:void 0!==(0,c._get)(t,"canChangeGroup")?(0,c._get)(t,"canChangeGroup"):e.props.canChangeGroup,canMove:void 0!==(0,c._get)(t,"canMove")?(0,c._get)(t,"canMove"):e.props.canMove,canResize:void 0!==(0,c._get)(t,"canResize")?(0,c._get)(t,"canResize"):e.props.canResize,useResizeHandle:e.props.useResizeHandle,topOffset:e.props.topOffset,groupHeights:e.props.groupHeights,groupTops:e.props.groupTops,canvasTimeStart:e.props.canvasTimeStart,canvasTimeEnd:e.props.canvasTimeEnd,canvasWidth:e.props.canvasWidth,lineHeight:e.props.lineHeight,dragSnap:e.props.dragSnap,minResizeWidth:e.props.minResizeWidth,onResizing:e.props.itemResizing,onResized:e.props.itemResized,moveResizeValidator:e.props.moveResizeValidator,onDrag:e.props.itemDrag,onDrop:e.props.itemDrop,onItemDoubleClick:e.props.onItemDoubleClick,onContextMenu:e.props.onItemContextMenu,onSelect:e.props.itemSelect})}))}}]),t}(p.Component);t["default"]=h,h.propTypes={groups:u["default"].PropTypes.oneOfType([u["default"].PropTypes.array,u["default"].PropTypes.object]).isRequired,items:u["default"].PropTypes.oneOfType([u["default"].PropTypes.array,u["default"].PropTypes.object]).isRequired,canvasTimeStart:u["default"].PropTypes.number.isRequired,canvasTimeEnd:u["default"].PropTypes.number.isRequired,canvasWidth:u["default"].PropTypes.number.isRequired,lineHeight:u["default"].PropTypes.number.isRequired,dragSnap:u["default"].PropTypes.number,minResizeWidth:u["default"].PropTypes.number,selectedItem:u["default"].PropTypes.oneOfType([u["default"].PropTypes.string,u["default"].PropTypes.number]),canChangeGroup:u["default"].PropTypes.bool.isRequired,canMove:u["default"].PropTypes.bool.isRequired,canResize:u["default"].PropTypes.bool.isRequired,keys:u["default"].PropTypes.object.isRequired,moveResizeValidator:u["default"].PropTypes.func,itemSelect:u["default"].PropTypes.func,itemDrag:u["default"].PropTypes.func,itemDrop:u["default"].PropTypes.func,itemResizing:u["default"].PropTypes.func,itemResized:u["default"].PropTypes.func,onItemDoubleClick:u["default"].PropTypes.func,onItemContextMenu:u["default"].PropTypes.func},h.defaultProps={}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),p=i(2),u=r(p),l=i(10),d=r(l),c=i(3),h=r(c),f=i(11),m=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.onMouseDown=function(e){i.state.interactMounted||(e.preventDefault(),i.startedClicking=!0)},i.onMouseUp=function(e){!i.state.interactMounted&&i.startedClicking&&(i.startedClicking=!1,i.actualClick(e,"click"))},i.onTouchStart=function(e){i.state.interactMounted||(e.preventDefault(),i.startedTouching=!0)},i.onTouchEnd=function(e){!i.state.interactMounted&&i.startedTouching&&(i.startedTouching=!1,i.actualClick(e,"touch"))},i.handleDoubleClick=function(e){e.preventDefault(),e.stopPropagation(),i.props.onItemDoubleClick&&i.props.onItemDoubleClick(i.itemId,e)},i.handleContextMenu=function(e){i.props.onContextMenu&&(e.preventDefault(),e.stopPropagation(),i.props.onContextMenu(i.itemId,e))},i.cacheDataFromProps(e),i.state={interactMounted:!1,dragging:null,dragStart:null,preDragPosition:null,dragTime:null,dragGroupDelta:null,resizing:null,resizeStart:null,resizeTime:null},i}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){var i=t.dragging!==this.state.dragging||t.dragTime!==this.state.dragTime||t.dragGroupDelta!==this.state.dragGroupDelta||t.resizing!==this.state.resizing||t.resizeTime!==this.state.resizeTime||e.keys!==this.props.keys||e.selected!==this.props.selected||e.item!==this.props.item||e.canvasTimeStart!==this.props.canvasTimeStart||e.canvasTimeEnd!==this.props.canvasTimeEnd||e.canvasWidth!==this.props.canvasWidth||e.lineHeight!==this.props.lineHeight||e.order!==this.props.order||e.dragSnap!==this.props.dragSnap||e.minResizeWidth!==this.props.minResizeWidth||e.selected!==this.props.selected||e.canChangeGroup!==this.props.canChangeGroup||e.topOffset!==this.props.topOffset||e.canMove!==this.props.canMove||e.canResize!==this.props.canResize||e.dimensions!==this.props.dimensions;return i}},{key:"cacheDataFromProps",value:function(e){this.itemId=(0,f._get)(e.item,e.keys.itemIdKey),this.itemTitle=(0,f._get)(e.item,e.keys.itemTitleKey),this.itemDivTitle=e.keys.itemDivTitleKey?(0,f._get)(e.item,e.keys.itemDivTitleKey):this.itemTitle,this.itemTimeStart=(0,f._get)(e.item,e.keys.itemTimeStartKey),this.itemTimeEnd=(0,f._get)(e.item,e.keys.itemTimeEndKey),this.itemStatus=(0,f._get)(e.item,e.keys.itemStatusKey)}},{key:"coordinateToTimeRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return(e.canvasTimeEnd-e.canvasTimeStart)/e.canvasWidth}},{key:"dragTimeSnap",value:function(e,t){var i=this.props.dragSnap;if(i){var r=t?60*(0,h["default"])().utcOffset()*1e3:0;return Math.round(e/i)*i-r%i}return e}},{key:"resizeTimeSnap",value:function(e){var t=this.props.dragSnap;if(t){var i=this.itemTimeEnd%t;return Math.round((e-i)/t)*t+i}return e}},{key:"dragTime",value:function(e){var t=this.itemTimeStart;if(this.state.dragging){var i=e.pageX-this.state.dragStart.x,r=i*this.coordinateToTimeRatio();return this.dragTimeSnap(t+r,!0)}return t}},{key:"dragGroupDelta",value:function(e){var t=this.props,i=t.groupTops,r=t.order,n=t.topOffset;if(this.state.dragging){if(!this.props.canChangeGroup)return 0;var o=0,s=!0,a=!1,p=void 0;try{for(var u,l=Object.keys(i)[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var d=u.value,c=i[d];if(!(e.pageY-n>c))break;o=parseInt(d,10)-r}}catch(h){a=!0,p=h}finally{try{!s&&l["return"]&&l["return"]()}finally{if(a)throw p}}return this.props.order+o<0?0-this.props.order:o}return 0}},{key:"resizeTimeDelta",value:function(e){var t=this.itemTimeEnd-this.itemTimeStart,i=this.dragTimeSnap((e.pageX-this.state.resizeStart)*this.coordinateToTimeRatio());return t+i<(this.props.dragSnap||1e3)?(this.props.dragSnap||1e3)-t:i}},{key:"componentDidMount",value:function(){}},{key:"mountInteract",value:function(){var e=this,t=!this.props.useResizeHandle||this.refs.dragRight;(0,d["default"])(this.refs.item).resizable({edges:{left:!1,right:t,top:!1,bottom:!1},enabled:this.props.selected&&this.canResize()}).draggable({enabled:this.props.selected}).styleCursor(!1).on("dragstart",function(t){return!!e.props.selected&&void e.setState({dragging:!0,dragStart:{x:t.pageX,y:t.pageY},preDragPosition:{x:t.target.offsetLeft,y:t.target.offsetTop},dragTime:e.itemTimeStart,dragGroupDelta:0})}).on("dragmove",function(t){if(e.state.dragging){var i=e.dragTime(t),r=e.dragGroupDelta(t);e.props.moveResizeValidator&&(i=e.props.moveResizeValidator("move",e.props.item,i)),e.props.onDrag&&e.props.onDrag(e.itemId,i,e.props.order+r),e.setState({dragTime:i,dragGroupDelta:r})}}).on("dragend",function(t){if(e.state.dragging){if(e.props.onDrop){var i=e.dragTime(t);e.props.moveResizeValidator&&(i=e.props.moveResizeValidator("move",e.props.item,i)),e.props.onDrop(e.itemId,i,e.props.order+e.dragGroupDelta(t))}e.setState({dragging:!1,dragStart:null,preDragPosition:null,dragTime:null,dragGroupDelta:null})}}).on("resizestart",function(t){return!!e.props.selected&&void e.setState({resizing:!0,resizeStart:t.pageX,newResizeEnd:0})}).on("resizemove",function(t){if(e.state.resizing){var i=e.resizeTimeSnap(e.itemTimeEnd+e.resizeTimeDelta(t));e.props.moveResizeValidator&&(i=e.props.moveResizeValidator("resize",e.props.item,i)),e.props.onResizing&&e.props.onResizing(e.itemId,i),e.setState({newResizeEnd:i})}}).on("resizeend",function(t){if(e.state.resizing){
var i=e.resizeTimeSnap(e.itemTimeEnd+e.resizeTimeDelta(t));e.props.moveResizeValidator&&(i=e.props.moveResizeValidator("resize",e.props.item,i)),e.props.onResized&&e.props.onResized(e.itemId,i),e.setState({resizing:null,resizeStart:null,newResizeEnd:null})}}).on("tap",function(t){e.actualClick(t,"mouse"===t.pointerType?"click":"touch")}),this.setState({interactMounted:!0})}},{key:"canResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(!e.canResize)return!1;var t=parseInt(this.props.dimensions.width,10);return t>=e.minResizeWidth}},{key:"canMove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return!!e.canMove}},{key:"componentWillReceiveProps",value:function(e){this.cacheDataFromProps(e);var t=this.state.interactMounted,i=this.props.selected&&this.canMove(this.props),r=this.props.selected&&this.canResize(this.props),n=e.selected&&this.canMove(e),o=e.selected&&this.canResize(e);e.selected&&!t&&(this.mountInteract(),t=!0),t&&r!==o&&(0,d["default"])(this.refs.item).resizable({enabled:o}),t&&i!==n&&(0,d["default"])(this.refs.item).draggable({enabled:n})}},{key:"actualClick",value:function(e,t){this.props.onSelect&&this.props.onSelect(this.itemId,t,e)}},{key:"render",value:function(){var e=this.props.dimensions;if("undefined"==typeof this.props.order||null===this.props.order)return null;var t="rct-item "+this.prop.status+" "+(this.props.selected?" selected":"")+(this.canMove(this.props)?" can-move":"")+(this.canResize(this.props)?" can-resize":"")+(this.props.item.className?" "+this.props.item.className:""),i={left:e.left+"px",top:e.top+"px",width:e.width+"px",height:e.height+"px",lineHeight:e.height+"px"};return u["default"].createElement("div",{key:this.itemId,ref:"item",className:t,title:this.props.item.dataTip?"":this.itemDivTitle,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,onDoubleClick:this.handleDoubleClick,onContextMenu:this.handleContextMenu,style:i,"data-tip":this.props.item.dataTip},u["default"].createElement("div",{className:"rct-item-overflow"},u["default"].createElement("div",{className:"rct-item-content"},this.itemTitle)),this.props.useResizeHandle?u["default"].createElement("div",{ref:"dragRight",className:"rct-drag-right"}):"")}}]),t}(p.Component);t["default"]=m,m.propTypes={},m.defaultProps={selected:!1}},function(e,t){e.exports=i},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){return"function"==typeof e.get?e.get(t):e[t]}function o(e){return"function"==typeof e.count?e.count():e.length}function s(e,t){return o(e)===o(t)&&e.every(function(e,i){return e===n(t,i)})}function a(e,t,i,r,n){var o=(0,w["default"])(e).startOf(i);if(r[i]&&r[i]>1){var s=o.get(i);o.set(i,s-s%r[i])}for(;o.valueOf()<t;){var a=(0,w["default"])(o).add(r[i]||1,i+"s");n(o,a),o=a}}function p(e,t,i){var r={second:1e3,minute:60,hour:60,day:24,month:30,year:12},n="year",o=e,s=17;return Object.keys(r).some(function(e){o/=r[e];var a=o/i[e],p=t/(i[e]&&i[e]>1?3*s:s);if(a<p)return n=e,!0}),n}function u(e){var t={second:"minute",minute:"hour",hour:"day",day:"month",month:"year"};return t[e]||""}function l(e){for(var t=0,i=0,r=!0;e;)t+=e.offsetLeft-(r?0:e.scrollLeft)+e.clientLeft,i+=e.offsetTop-(r?0:e.scrollTop)+e.clientTop,e=e.offsetParent,r=!1;return{x:t,y:i}}function d(e,t,i){return(t-e)/i}function c(e,t,i,r,o,s,a,p,u,l,c,h,f,m){var g=n(e,i.itemIdKey),v=n(e,i.itemTimeStartKey),y=n(e,i.itemTimeEndKey),T=g===u,b=g===c,S=T?l:v,P=Math.max((b?h:y)-v,a),w=v,x=P;T&&(v>=l?(w=l,x=Math.max(y-l,a)):x=Math.max(l-v+P,a));var k=p*m,E=1/d(r,o,s),C={left:(S-r)*E,top:null,width:Math.max(P*E,3),height:k,order:T?f:t,stack:!0,lineHeight:p,collisionLeft:w,originalLeft:v,collisionWidth:x,isDragging:T};return C}function h(e,t){for(var i=t.groupIdKey,r={},o=0;o<e.length;o++)r[n(e[o],i)]=o;return r}function f(e,t,i,r){var o=r.itemTimeStartKey,s=r.itemTimeEndKey;return e.filter(function(e){return n(e,o)<=i&&n(e,s)>=t})}function m(e,t,i){var r=0;return e.collisionLeft+x<t.collisionLeft+t.collisionWidth&&e.collisionLeft+e.collisionWidth-x>t.collisionLeft&&e.top-r+x<t.top+t.height&&e.top+e.height+r-x>t.top}function g(e,t,i,r,n){var o,s,a=r,p={},u={},l=T(e,function(e){return e.dimensions.order});if(n)for(o=0,s=e.length;o<s;o++)e[o].dimensions.top=null;var d=!0,c=!1,h=void 0;try{for(var f,g=Object.keys(t)[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var v=f.value,y=t[v],b=l[y]||[];u[y]=a;var S=0,P=0;for(o=0,s=b.length;o<s;o++){var w=b[o];if(P=w.dimensions.lineHeight-w.dimensions.height,w.dimensions.stack&&null===w.dimensions.top){w.dimensions.top=a+P,S=Math.max(S,w.dimensions.lineHeight);do{for(var x=null,k=0,E=b.length;k<E;k++){var C=b[k];if(null!==C.top&&C!==w&&C.dimensions.stack&&m(w.dimensions,C.dimensions,w.dimensions.lineHeight)){x=C;break}}null!=x&&(w.dimensions.top=x.dimensions.top+x.dimensions.lineHeight,S=Math.max(S,w.dimensions.top+w.dimensions.height-a))}while(x)}}p[y]=Math.max(S+P,i),a+=Math.max(S+P,i)}}catch(M){c=!0,h=M}finally{try{!d&&g["return"]&&g["return"]()}finally{if(c)throw h}}return{height:a,groupHeights:p,groupTops:u}}function v(e,t,i,r,n){var o,s,a=r,p={},u={},l=T(e,function(e){return e.dimensions.order});if(n)for(o=0,s=e.length;o<s;o++)e[o].dimensions.top=null;var d=!0,c=!1,h=void 0;try{for(var f,m=Object.keys(t)[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var g=f.value,v=t[g],y=l[v]||[];u[v]=a;var b=0;for(o=0,s=y.length;o<s;o++){var S=y[o],P=(S.dimensions.lineHeight-S.dimensions.height)/2;null===S.dimensions.top&&(S.dimensions.top=a+P,b=Math.max(b,S.dimensions.lineHeight))}p[v]=Math.max(b,i),a+=Math.max(b,i)}}catch(w){c=!0,h=w}finally{try{!d&&m["return"]&&m["return"]()}finally{if(c)throw h}}return{height:a,groupHeights:p,groupTops:u}}function y(e,t){var i={};return e.forEach(function(e,r,n){i[e[t]]=e}),i}function T(e,t){var i={};return e.forEach(function(e,r,n){var o=t(e);i[o]||(i[o]=[]),i[o].push(e)}),i}function b(e,t){return!!(e.className&&e.className.split(" ").indexOf(t)>=0)||e.parentNode&&b(e.parentNode,t)}function S(e,t,i,r){return r?i&&t!==i?"repeating-linear-gradient(to bottom, "+(t+",")+(t+" "+(e-1)+"px,")+(r+" "+(e-1)+"px,")+(r+" "+e+"px,")+(i+" "+e+"px,")+(i+" "+(2*e-1)+"px,")+(r+" "+(2*e-1)+"px,")+(r+" "+2*e+"px")+")":"repeating-linear-gradient(to bottom, "+(t+",")+(t+" "+(e-1)+"px,")+(r+" "+(e-1)+"px,")+(r+" "+e+"px")+")":i&&t!==i?"repeating-linear-gradient(to bottom,"+t+","+t+" "+e+"px,"+i+" "+e+"px,"+i+" "+2*e+"px)":t}Object.defineProperty(t,"__esModule",{value:!0}),t._get=n,t._length=o,t.arraysEqual=s,t.iterateTimes=a,t.getMinUnit=p,t.getNextUnit=u,t.getParentPosition=l,t.coordinateToTimeRatio=d,t.calculateDimensions=c,t.getGroupOrders=h,t.getVisibleItems=f,t.collision=m,t.stack=g,t.nostack=v,t.keyBy=y,t.groupBy=T,t.hasSomeParentTheClass=b,t.createGradientPattern=S;var P=i(3),w=r(P),x=.001},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),p=i(2),u=r(p),l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"rct-infolabel"},this.props.label)}}]),t}(p.Component);t["default"]=l,l.propTypes={label:u["default"].PropTypes.string.isRequired},l.defaultProps={label:""}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),p=i(2),u=r(p),l=i(11),d=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.state={scrollTop:0,componentTop:0},i}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return!("absolute"!==e.fixedHeader||!window||!window.document||this.state.scrollTop===t.scrollTop)||!((0,l.arraysEqual)(e.groups,this.props.groups)&&e.keys===this.props.keys&&e.width===this.props.width&&e.lineHeight===this.props.lineHeight&&e.fixedHeader===this.props.fixedHeader&&e.zIndex===this.props.zIndex&&e.groupHeights===this.props.groupHeights&&e.height===this.props.height)}},{key:"scroll",value:function(e){}},{key:"setComponentTop",value:function(){var e=this.refs.sidebar.getBoundingClientRect();this.setState({componentTop:e.top})}},{key:"componentDidMount",value:function(){var e=this;this.setComponentTop(),this.scroll(),this.scrollEventListener={handleEvent:function(t){e.scroll()}},window.addEventListener("scroll",this.scrollEventListener)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollEventListener)}},{key:"componentWillReceiveProps",value:function(){this.setComponentTop()}},{key:"render",value:function(){var e=this.props,t=e.fixedHeader,i=e.width,r=e.lineHeight,n=e.zIndex,o=e.groupHeights,s=e.height,a=e.headerHeight,p=this.props.keys,d=p.groupIdKey,c=p.groupTitleKey,h={width:i+"px",height:s+"px"},f={height:a+"px",lineHeight:r+"px",width:i+"px"},m={width:i+"px"};"fixed"===t&&(f.position="fixed",f.zIndex=n,m.paddingTop=f.height);var g=u["default"].createElement("div",{ref:"sidebarHeader",className:"rct-sidebar-header",style:f},this.props.children),v=[],y=0;return this.props.groups.forEach(function(e,t){var i={height:o[t]-1+"px",lineHeight:o[t]-1+"px"};v.push(u["default"].createElement("div",{key:(0,l._get)(e,d),className:"rct-sidebar-row"+(y%2===0?" rct-sidebar-row-even":" rct-sidebar-row-odd"),style:i},(0,l._get)(e,c))),y+=1}),u["default"].createElement("div",{ref:"sidebar",className:"rct-sidebar",style:h},g,u["default"].createElement("div",{style:m},v))}}]),t}(p.Component);t["default"]=d,d.propTypes={groups:u["default"].PropTypes.oneOfType([u["default"].PropTypes.array,u["default"].PropTypes.object]).isRequired,width:u["default"].PropTypes.number.isRequired,lineHeight:u["default"].PropTypes.number.isRequired,zIndex:u["default"].PropTypes.number,fixedHeader:u["default"].PropTypes.oneOf(["fixed","absolute","none"]),keys:u["default"].PropTypes.object.isRequired,children:u["default"].PropTypes.node},d.defaultProps={fixedHeader:"none",zIndex:12,children:null}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),p=i(2),u=r(p),l=i(3),d=r(l),c=i(11),h=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.periodClick=function(e){var t=e.target.dataset,r=t.time,n=t.unit;r&&n&&i.props.showPeriod((0,d["default"])(r-0),n)},i.touchStart=function(e){1===e.touches.length&&i.setState({touchTarget:e.target||e.touchTarget,touchActive:!0})},i.touchEnd=function(e){if(!i.state.touchActive)return i.resetTouchState();var t=e.changedTouches[0];if(t){var r=document.elementFromPoint(t.pageX,t.pageY);if(r!==i.state.touchTarget)return i.resetTouchState()}i.resetTouchState(),i.periodClick(e)},i.state={scrollTop:0,componentTop:0,touchTarget:null,touchActive:!1},i}return s(t,e),a(t,[{key:"scroll",value:function i(e){if("absolute"===this.props.fixedHeader&&window&&window.document){var i=window.document.body.scrollTop;this.setState({scrollTop:i+this.props.fixedHeaderOffset})}}},{key:"setComponentTop",value:function(){var e=this.refs.header.getBoundingClientRect(),t=window.document.body.scrollTop;e.top!==this.props.fixedHeaderOffset&&this.setState({componentTop:e.top+t})}},{key:"componentDidMount",value:function(){var e=this;this.setComponentTop(),this.scroll(),this.scrollEventListener={handleEvent:function(t){e.scroll()}},window.addEventListener("scroll",this.scrollEventListener)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollEventListener)}},{key:"componentWillReceiveProps",value:function(e){this.state.itemParentId!==e.itemParentId&&(this.setComponentTop(),this.setState({itemParentId:e.itemParentId}))}},{key:"headerLabel",value:function(e,t,i){return"year"===t?e.format(i<46?"YY":"YYYY"):"month"===t?e.format(i<65?"MM/YY":i<75?"MM/YYYY":i<120?"MMM YYYY":"MMMM YYYY"):"day"===t?e.format(i<150?"L":"dddd, LL"):"hour"===t?e.format(i<50?"h A":i<130?"h:00 A":i<150?"L, h:00 A":"dddd, LL, h:00 A"):e.format("LLL")}},{key:"subHeaderLabel",value:function(e,t,i){return"year"===t?e.format(i<46?"YY":"YYYY"):"month"===t?e.format(i<37?"MM":i<85?"MMM":"MMMM"):"day"===t?e.format(i<47?"D":i<80?"dd D":i<120?"ddd, Do":"dddd, Do"):"hour"===t?e.format(i<50?"h A":"h:00 A"):"minute"===t?e.format(i<60?"mm":"h:mm A"):e.get(t)}},{key:"resetTouchState",value:function(){this.setState({touchTarget:null,touchActive:!1})}},{key:"render",value:function(){var e=this,t=[],i=this.props,r=i.canvasTimeStart,n=i.canvasTimeEnd,o=i.canvasWidth,s=i.lineHeight,a=i.visibleTimeStart,p=i.visibleTimeEnd,l=i.minUnit,d=i.timeSteps,h=i.fixedHeader,f=i.headerLabelGroupHeight,m=i.headerLabelHeight,g=this.state.scrollTop,v=o/(n-r),y="year"!==l;y&&!function(){var i=(0,c.getNextUnit)(l);(0,c.iterateTimes)(a,p,i,d,function(n,o){var s=Math.max(a,n.valueOf()),l=Math.min(p,o.valueOf()),d=Math.round((s.valueOf()-r)*v,-2),c=Math.round((l.valueOf()-r)*v,-2),m=c-d,g="fixed"===h?Math.round((r-a)*v)-1:0;t.push(u["default"].createElement("div",{key:"top-label-"+n.valueOf(),href:"#",className:"rct-label-group","data-time":n,"data-unit":i,style:{left:d+g+"px",width:m+"px",height:f+"px",lineHeight:f+"px",cursor:"pointer"}},e.headerLabel(n,i,m)))})}(),(0,c.iterateTimes)(r,n,l,d,function(i,n){var o=Math.round((i.valueOf()-r)*v,-2),s=i.get("day"===l?"date":l),p=s===("day"===l?1:0),d=Math.round((n.valueOf()-i.valueOf())*v,-2),c=p?2:1,g="fixed"===h?Math.round((r-a)*v)-c+1:0;t.push(u["default"].createElement("div",{key:"label-"+i.valueOf(),href:"#",className:"rct-label "+(y?"":"rct-label-only")+" "+(p?"rct-first-of-type":"")+" ","data-time":i,"data-unit":l,style:{top:("year"===l?0:f)+"px",left:o+g+"px",width:d+"px",height:("year"===l?f+m:m)+"px",lineHeight:("year"===l?f+m:m)+"px",fontSize:(d>30?"14":d>20?"12":"10")+"px",cursor:"pointer"}},e.subHeaderLabel(i,l,d)))});var T=this.props.zIndex,b={height:f+m+"px",lineHeight:s+"px"};if("fixed"===h)b.position="fixed",b.width="100%",b.zIndex=T;else if("absolute"===h){var S=this.state.componentTop;g>=S&&(b.position="absolute",b.top=g-S+"px",b.width=o+"px",b.left="0")}return u["default"].createElement("div",{ref:"header",key:"header",className:"rct-header",onTouchStart:this.touchStart,onTouchEnd:this.touchEnd,onClick:this.periodClick,style:b},t)}}]),t}(p.Component);t["default"]=h,h.propTypes={showPeriod:u["default"].PropTypes.func.isRequired,canvasTimeStart:u["default"].PropTypes.number.isRequired,canvasTimeEnd:u["default"].PropTypes.number.isRequired,canvasWidth:u["default"].PropTypes.number.isRequired,lineHeight:u["default"].PropTypes.number.isRequired,visibleTimeStart:u["default"].PropTypes.number.isRequired,visibleTimeEnd:u["default"].PropTypes.number.isRequired,minUnit:u["default"].PropTypes.string.isRequired,timeSteps:u["default"].PropTypes.object.isRequired,width:u["default"].PropTypes.number.isRequired,fixedHeader:u["default"].PropTypes.oneOf(["fixed","absolute","none"]),fixedHeaderOffset:u["default"].PropTypes.number.isRequired,zIndex:u["default"].PropTypes.number},h.defaultProps={fixedHeader:"none",fixedHeaderOffset:0,zIndex:11}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),p=i(2),u=r(p),l=i(11),d=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e.canvasTimeStart===this.props.canvasTimeStart&&e.canvasTimeEnd===this.props.canvasTimeEnd&&e.canvasWidth===this.props.canvasWidth&&e.lineHeight===this.props.lineHeight&&e.lineCount===this.props.lineCount&&e.minUnit===this.props.minUnit&&e.timeSteps===this.props.timeSteps&&e.fixedHeader===this.props.fixedHeader&&e.height===this.props.height&&e.headerHeight===this.props.headerHeight)}},{key:"render",value:function(){var e=this,t=this.props,i=t.canvasTimeStart,r=t.canvasTimeEnd,n=t.canvasWidth,o=t.minUnit,s=t.timeSteps,a=t.height,p=t.headerHeight,d=n/(r-i),c=[];return(0,l.iterateTimes)(i,r,o,s,function(t,r){var n=Math.round((t.valueOf()-i)*d,-2),s=t.get("day"===o?"date":o),l=s===("day"===o?1:0),h=l?2:1,f=Math.ceil(r.valueOf()-t.valueOf()*d)-h,m="fixed"===e.props.fixedHeader&&l?-1:0,g="rct-vl"+(l?" rct-vl-first":"")+("day"===o||"hour"===o||"minute"===o?" rct-day-"+t.day():"");c.push(u["default"].createElement("div",{key:"line-"+t.valueOf(),className:g,style:{top:p+"px",left:n+m+"px",width:f+"px",height:a-p+"px"}}))}),u["default"].createElement("div",{className:"rct-vertical-lines"},c)}}]),t}(p.Component);t["default"]=d,d.propTypes={canvasTimeStart:u["default"].PropTypes.number.isRequired,canvasTimeEnd:u["default"].PropTypes.number.isRequired,canvasWidth:u["default"].PropTypes.number.isRequired,lineHeight:u["default"].PropTypes.number.isRequired,lineCount:u["default"].PropTypes.number.isRequired,minUnit:u["default"].PropTypes.string.isRequired,timeSteps:u["default"].PropTypes.object.isRequired,fixedHeader:u["default"].PropTypes.string.isRequired},d.defaultProps={fixedHeader:"none",dayBackground:null}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),p=i(2),u=r(p),l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(e.canvasWidth===this.props.canvasWidth&&e.lineHeight===this.props.lineHeight&&e.lineCount===this.props.lineCount&&e.groupHeights===this.props.groupHeights)}},{key:"render",value:function(){for(var e=this.props,t=e.lineCount,i=e.canvasWidth,r=e.groupHeights,n=e.headerHeight,o=[],s=n,a=0;a<t;a++)o.push(u["default"].createElement("div",{key:"horizontal-line-"+a,className:a%2===0?"rct-hl-even":"rct-hl-odd",style:{top:s+"px",left:"0px",width:i+"px",height:r[a]-1+"px"}})),s+=r[a];return u["default"].createElement("div",{className:"rct-horizontal-lines"},o)}}]),t}(p.Component);t["default"]=l,l.propTypes={canvasWidth:u["default"].PropTypes.number.isRequired,lineHeight:u["default"].PropTypes.number.isRequired,lineCount:u["default"].PropTypes.number.isRequired},l.defaultProps={borderWidth:1}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),p=i(2),u=r(p),l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"render",value:function(){var e=(new Date).getTime();if(e>this.props.canvasTimeStart&&e<this.props.canvasTimeEnd){var t=this.props.canvasWidth/(this.props.canvasTimeEnd-this.props.canvasTimeStart),i=Math.round((e-this.props.canvasTimeStart)*t),r=this.props.headerHeight,n=this.props.height-this.props.headerHeight,o={top:r+"px",left:i+"px",height:n+"px"};return u["default"].createElement("div",{className:"rct-today",style:o})}return u["default"].createElement("div",null)}}]),t}(p.Component);t["default"]=l,l.propTypes={canvasTimeStart:u["default"].PropTypes.number.isRequired,canvasTimeEnd:u["default"].PropTypes.number.isRequired,canvasWidth:u["default"].PropTypes.number.isRequired,lineHeight:u["default"].PropTypes.number.isRequired,lineCount:u["default"].PropTypes.number.isRequired},l.defaultProps={}}])});
//# sourceMappingURL=react-calendar-timeline.min.js.map